<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Valentine's Pac-Man</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        /* Valentine's Pac-Man Game Styles */
        #pacman-game {
            width: 400px;
            height: 400px;
            background-color: pink;
            position: relative;
            margin: 0 auto;
            border: 5px solid red;
            display: grid;
            grid-template-columns: repeat(20, 20px);
            grid-template-rows: repeat(20, 20px);
        }
        .pacman {
            width: 20px;
            height: 20px;
            background-color: yellow;
            border-radius: 50%;
            position: absolute;
        }
        .ghost {
            width: 20px;
            height: 20px;
            background-color: purple;
            border-radius: 50%;
            position: absolute;
        }
        .pellet {
            width: 10px;
            height: 10px;
            background-color: white;
            border-radius: 50%;
            position: absolute;
        }
        .rose {
            width: 15px;
            height: 15px;
            background-color: red;
            clip-path: polygon(50% 0%, 100% 38%, 82% 100%, 50% 82%, 18% 100%, 0% 38%);
            position: absolute;
        }
    </style>
</head>
<body>
    <header>
        <h1>Valentine's Pac-Man</h1>
        <nav>
            <ul>
                <li><a href="homepage.html">Homepage</a></li>
                <li><a href="papers.html">Paper Listing</a></li>
            </ul>
        </nav>
    </header>
    <main>
        <section>
            <h2>Play Valentine's Pac-Man</h2>
            <p>Instructions:</p>
            <ul>
                <li>Use the arrow keys to move Pac-Man around the maze.</li>
                <li>Eat all the dots (pellets) to win the game.</li>
                <li>Avoid the ghosts! If they catch you, you lose a life.</li>
                <li>Collect the Valentine's rose ðŸŒ¹ to enter a powered-up state.</li>
                <li>While powered up, press the spacebar to shoot hearts ðŸ’• and eliminate ghosts.</li>
            </ul>
            <div id="pacman-game">
                <!-- Maze layout with dots and ghosts -->
                <div class="pellet" style="grid-column: 1; grid-row: 1;"></div>
                <div class="pellet" style="grid-column: 2; grid-row: 1;"></div>
                <div class="pellet" style="grid-column: 3; grid-row: 1;"></div>
                <div class="ghost" id="ghost1" style="grid-column: 10; grid-row: 10;"></div>
                <div class="ghost" id="ghost2" style="grid-column: 15; grid-row: 15;"></div>
                <div class="rose" id="rose" style="grid-column: 5; grid-row: 5;"></div>
                <div class="pacman" id="pacman" style="grid-column: 1; grid-row: 1;"></div>
            </div>
        </section>
    </main>
    <footer>
        <p>&copy; 2026 My Personal Website</p>
    </footer>
    <script>
        // Valentine's Pac-Man Game Logic
        const pacman = document.getElementById('pacman');
        const gameArea = document.getElementById('pacman-game');
        const ghosts = document.querySelectorAll('.ghost');
        const pellets = document.querySelectorAll('.pellet');
        const rose = document.getElementById('rose');
        const step = 20;
        let poweredUp = false;

        document.addEventListener('keydown', (event) => {
            const pacmanStyle = window.getComputedStyle(pacman);
            const currentColumn = parseInt(pacmanStyle.gridColumnStart);
            const currentRow = parseInt(pacmanStyle.gridRowStart);

            switch (event.key) {
                case 'ArrowUp':
                    if (currentRow > 1) pacman.style.gridRowStart = currentRow - 1;
                    break;
                case 'ArrowDown':
                    if (currentRow < 20) pacman.style.gridRowStart = currentRow + 1;
                    break;
                case 'ArrowLeft':
                    if (currentColumn > 1) pacman.style.gridColumnStart = currentColumn - 1;
                    break;
                case 'ArrowRight':
                    if (currentColumn < 20) pacman.style.gridColumnStart = currentColumn + 1;
                    break;
                case ' ': // Spacebar to shoot hearts
                    if (poweredUp) shootHeart(currentColumn, currentRow);
                    break;
            }

            checkCollisions();
        });

        function checkCollisions() {
            // Check for pellet collisions
            pellets.forEach((pellet) => {
                const pelletStyle = window.getComputedStyle(pellet);
                if (
                    pelletStyle.gridColumnStart === pacman.style.gridColumnStart &&
                    pelletStyle.gridRowStart === pacman.style.gridRowStart
                ) {
                    pellet.remove();
                }
            });

            // Check for rose collision
            const roseStyle = window.getComputedStyle(rose);
            if (
                roseStyle.gridColumnStart === pacman.style.gridColumnStart &&
                roseStyle.gridRowStart === pacman.style.gridRowStart
            ) {
                poweredUp = true;
                rose.remove();
                setTimeout(() => (poweredUp = false), 5000); // Power-up lasts 5 seconds
            }

            // Check for ghost collisions
            ghosts.forEach((ghost) => {
                const ghostStyle = window.getComputedStyle(ghost);
                if (
                    ghostStyle.gridColumnStart === pacman.style.gridColumnStart &&
                    ghostStyle.gridRowStart === pacman.style.gridRowStart
                ) {
                    alert('Game Over! A ghost caught you.');
                    location.reload();
                }
            });
        }

        function shootHeart(column, row) {
            const heart = document.createElement('div');
            heart.classList.add('heart');
            heart.style.gridColumnStart = column;
            heart.style.gridRowStart = row;
            gameArea.appendChild(heart);

            const interval = setInterval(() => {
                const heartRow = parseInt(heart.style.gridRowStart);
                if (heartRow > 1) {
                    heart.style.gridRowStart = heartRow - 1;
                } else {
                    heart.remove();
                    clearInterval(interval);
                }

                ghosts.forEach((ghost) => {
                    const ghostStyle = window.getComputedStyle(ghost);
                    if (
                        ghostStyle.gridColumnStart === heart.style.gridColumnStart &&
                        ghostStyle.gridRowStart === heart.style.gridRowStart
                    ) {
                        ghost.remove();
                        heart.remove();
                        clearInterval(interval);
                    }
                });
            }, 200);
        }
    </script>
</body>
</html>